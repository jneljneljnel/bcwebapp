(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1425:function(e,t,a){"use strict";a.r(t);var n=a(68),o=a(69),l=a(71),r=a(70),i=a(72),c=a(109),s=a(1),m=a.n(s),d=a(4),u=a(345),p=(a(357),{rows:[]}),g=a(25),h=a(411),b=(a(328),Object(g.a)(),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).table=p.rows,a.goButton=a.goButton.bind(Object(c.a)(Object(c.a)(a))),a.state={data:[]},a.options={sortIndicator:!0,hideSizePerPage:!0,paginationSize:3,hidePageListOnlyOnePage:!0,clearSearch:!0,alwaysShowAllBtns:!1,withFirstAndLast:!1},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"goButton",value:function(e,t){var a=this;return m.a.createElement("div",null,m.a.createElement(d.e,{color:"success",onClick:function(){return a.props.history.push("/create/"+t.id)}},"Open"))}},{key:"address",value:function(e,t){return m.a.createElement("div",{style:{whiteSpace:"pre-wrap",maxWidth:"190px"}},t.street+" "+t.city)}},{key:"jobName",value:function(e,t){return m.a.createElement("div",{style:{whiteSpace:"pre-wrap",maxWidth:"190px"}},t.name)}},{key:"render",value:function(){return m.a.createElement("div",{className:"animated"},m.a.createElement(d.i,null,m.a.createElement(d.n,null,m.a.createElement("i",{className:"icon-menu"}),this.props.name," "),m.a.createElement(d.j,null,m.a.createElement(u.BootstrapTable,{data:this.props.data||this.table,version:"4",striped:!0,hover:!0,pagination:!0,search:!0,options:this.options},m.a.createElement(u.TableHeaderColumn,{dataFormat:this.goButton}),m.a.createElement(u.TableHeaderColumn,{isKey:!0,dataField:"id",dataSort:!0},"JobId"),m.a.createElement(u.TableHeaderColumn,{dataField:"name",dataFormat:this.jobName}," Job Name"),m.a.createElement(u.TableHeaderColumn,{dataField:"client"}," Client Name"),m.a.createElement(u.TableHeaderColumn,{dataField:"cost"}," Cost"),m.a.createElement(u.TableHeaderColumn,{dataField:"recievedDate",dataSort:!0}," Recieved Date"),m.a.createElement(u.TableHeaderColumn,{dataFormat:this.address,dataSort:!0},"Address"),m.a.createElement(u.TableHeaderColumn,{dataField:"comments",dataSort:!0},"Comments")))))}}]),t}(s.Component)),f=Object(h.a)(b),j=a(428),E=a(328),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={isOpen:!1},a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props,t=e.location;e.icon;return m.a.createElement(j.Marker,{onClick:this.toggle,icon:t.icon,position:t,title:t.title,label:t.label},this.state.isOpen&&m.a.createElement(j.InfoWindow,{onCloseClick:this.toggle},m.a.createElement("div",null,m.a.createElement("p",null,t.title),m.a.createElement("p",null,t.jobId),m.a.createElement("p",null,t.hname),m.a.createElement("p",null,t.phone),m.a.createElement(d.X,{href:t.www,target:"_blank"},m.a.createElement("p",null,t.address)))))}}]),t}(s.Component),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.locations.map(function(e,t){if(console.log("l",e),e&&e.title)return m.a.createElement(v,{key:t.toString(),location:e})})}}]),t}(s.Component),y=Object(j.withScriptjs)(Object(j.withGoogleMap)(function(e){return m.a.createElement(j.GoogleMap,{defaultZoom:11,defaultCenter:e.center},m.a.createElement(O,{locations:e.locations}))})),w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.toggleFade=a.toggleFade.bind(Object(c.a)(Object(c.a)(a))),a.state={data:[],collapse:!0,fadeIn:!0,timeout:300,locations:[]},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState(function(e){return{fadeIn:!e}})}},{key:"componentDidMount",value:function(){this.getDoneJobs(),console.log(this.state)}},{key:"getDoneJobs",value:function(){var e=this;console.log("get pending"),E.get("/api/jobs/pending").then(function(t){console.log(t.data),e.setState({data:t.data});var a=[];t.data.map(function(e){var t="";"1"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/green.png"),"2"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/red.png"),"3"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/blue.png"),e.street&&a.push(E.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e.street+" "+e.city+" "+e.state+e.postal,"&key=AIzaSyA3FkbIxQAgVDWNej22DnBn6XzhHjoK5nc")).then(function(a){if(console.log("JAY",e),a.data.results[0]&&a.data.results.length)return{lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,hname:e.homeownerName,label:void 0,jobId:e.id,draggable:!1,title:e.name,icon:t,phone:e.siteNumber,address:e.street+" "+e.city};console.log("dont push")}))}),Promise.all(a).then(function(t){e.setState({locations:t})})})}},{key:"render",value:function(){return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.ib,null,m.a.createElement(d.t,{xs:"12",md:"12"},m.a.createElement(f,{name:"Pending Jobs",data:this.state.data}),m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.i,null,m.a.createElement(d.n,null,m.a.createElement("i",{className:"icon-map"})," Google Maps"),m.a.createElement(d.j,null,this.state.locations.length?m.a.createElement(y,{locations:this.state.locations,center:this.state.locations[0],key:"map",googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyA3FkbIxQAgVDWNej22DnBn6XzhHjoK5nc",loadingElement:m.a.createElement("div",{style:{height:"100%"}}),containerElement:m.a.createElement("div",{style:{height:"400px"}}),mapElement:m.a.createElement("div",{style:{height:"100%"}})}):null))))))}}]),t}(s.Component);t.default=w},411:function(e,t,a){"use strict";var n=a(1),o=a.n(n),l=a(0),r=a.n(l),i=a(288),c=a.n(i),s=a(110),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var d=function(e){var t=function(t){var a=t.wrappedComponentRef,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(t,["wrappedComponentRef"]);return o.a.createElement(s.a,{children:function(t){return o.a.createElement(e,m({},n,t,{ref:a}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:r.a.func},c()(t,e)};t.a=d}}]);
//# sourceMappingURL=70.6f430513.chunk.js.map