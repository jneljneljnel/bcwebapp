(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1420:function(e,t,a){"use strict";a.r(t);var n=a(68),o=a(69),l=a(71),i=a(70),s=a(72),c=a(109),r=a(1),m=a.n(r),d=a(4),u=a(344),p=(a(356),{rows:[]}),g=a(25),h=a(1361),b=(a(333),Object(g.a)(),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).table=p.rows,a.goButton=a.goButton.bind(Object(c.a)(Object(c.a)(a))),a.state={data:[]},a.options={sortIndicator:!0,hideSizePerPage:!0,paginationSize:3,hidePageListOnlyOnePage:!0,clearSearch:!0,alwaysShowAllBtns:!1,withFirstAndLast:!1},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"goButton",value:function(e,t){var a=this;return m.a.createElement("div",null,m.a.createElement(d.e,{color:"success",onClick:function(){return a.props.history.push("/create/"+t.id)}},"Open"))}},{key:"address",value:function(e,t){return m.a.createElement("div",{style:{whiteSpace:"pre-wrap",maxWidth:"190px"}},t.street+" "+t.city)}},{key:"jobName",value:function(e,t){return m.a.createElement("div",{style:{whiteSpace:"pre-wrap",maxWidth:"190px"}},t.name)}},{key:"render",value:function(){return m.a.createElement("div",{className:"animated"},m.a.createElement(d.i,null,m.a.createElement(d.n,null,m.a.createElement("i",{className:"icon-menu"}),this.props.name," "),m.a.createElement(d.j,null,m.a.createElement(u.BootstrapTable,{data:this.props.data||this.table,version:"4",striped:!0,hover:!0,pagination:!0,search:!0,options:this.options},m.a.createElement(u.TableHeaderColumn,{dataFormat:this.goButton}),m.a.createElement(u.TableHeaderColumn,{isKey:!0,dataField:"id",dataSort:!0},"JobId"),m.a.createElement(u.TableHeaderColumn,{dataField:"name",dataFormat:this.jobName}," Job Name"),m.a.createElement(u.TableHeaderColumn,{dataField:"client"}," Client Name"),m.a.createElement(u.TableHeaderColumn,{dataField:"cost"}," Cost"),m.a.createElement(u.TableHeaderColumn,{dataField:"recievedDate",dataSort:!0}," Recieved Date"),m.a.createElement(u.TableHeaderColumn,{dataFormat:this.address,dataSort:!0},"Address"),m.a.createElement(u.TableHeaderColumn,{dataField:"comments",dataSort:!0},"Comments")))))}}]),t}(r.Component)),j=Object(h.a)(b),E=a(427),f=a(333),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={isOpen:!1},a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props,t=e.location;e.icon;return m.a.createElement(E.Marker,{onClick:this.toggle,icon:t.icon,position:t,title:t.title,label:t.label},this.state.isOpen&&m.a.createElement(E.InfoWindow,{onCloseClick:this.toggle},m.a.createElement("div",null,m.a.createElement("p",null,t.title),m.a.createElement("p",null,t.jobId),m.a.createElement("p",null,t.hname),m.a.createElement("p",null,t.phone),m.a.createElement(d.X,{href:t.www,target:"_blank"},m.a.createElement("p",null,t.address)))))}}]),t}(r.Component),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.locations.map(function(e,t){if(console.log("l",e),e&&e.title)return m.a.createElement(O,{key:t.toString(),location:e})})}}]),t}(r.Component),y=Object(E.withScriptjs)(Object(E.withGoogleMap)(function(e){return m.a.createElement(E.GoogleMap,{defaultZoom:11,defaultCenter:e.center},m.a.createElement(v,{locations:e.locations}))})),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.toggleFade=a.toggleFade.bind(Object(c.a)(Object(c.a)(a))),a.state={data:[],collapse:!0,fadeIn:!0,timeout:300,locations:[]},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState(function(e){return{fadeIn:!e}})}},{key:"componentDidMount",value:function(){this.getDoneJobs(),console.log(this.state)}},{key:"getDoneJobs",value:function(){var e=this;console.log("get pending"),f.get("/api/jobs/pending").then(function(t){console.log(t.data),e.setState({data:t.data});var a=[];t.data.map(function(e){var t="";"1"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/green.png"),"2"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/red.png"),"3"==e.inspector&&(t="http://maps.google.com/mapfiles/ms/icons/blue.png"),e.street&&a.push(f.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e.street+" "+e.city+" "+e.state+e.postal,"&key=AIzaSyA3FkbIxQAgVDWNej22DnBn6XzhHjoK5nc")).then(function(a){if(console.log("JAY",e),a.data.results[0]&&a.data.results.length)return{lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,hname:e.homeownerName,label:void 0,jobId:e.id,draggable:!1,title:e.name,icon:t,phone:e.siteNumber,address:e.street+" "+e.city};console.log("dont push")}))}),Promise.all(a).then(function(t){e.setState({locations:t})})})}},{key:"render",value:function(){return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.ib,null,m.a.createElement(d.t,{xs:"12",md:"12"},m.a.createElement(j,{name:"Pending Jobs",data:this.state.data}),m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.i,null,m.a.createElement(d.n,null,m.a.createElement("i",{className:"icon-map"})," Google Maps"),m.a.createElement(d.j,null,this.state.locations.length?m.a.createElement(y,{locations:this.state.locations,center:this.state.locations[0],key:"map",googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyA3FkbIxQAgVDWNej22DnBn6XzhHjoK5nc",loadingElement:m.a.createElement("div",{style:{height:"100%"}}),containerElement:m.a.createElement("div",{style:{height:"400px"}}),mapElement:m.a.createElement("div",{style:{height:"100%"}})}):null))))))}}]),t}(r.Component);t.default=k}}]);
//# sourceMappingURL=70.0b05ee1b.chunk.js.map